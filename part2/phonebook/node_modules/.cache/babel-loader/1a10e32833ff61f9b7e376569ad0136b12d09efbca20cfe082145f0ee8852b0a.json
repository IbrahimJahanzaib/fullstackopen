{"ast":null,"code":"import _objectSpread from\"C:/Users/Ibrahim Jahanzaib/OneDrive/Desktop/fullstackopen/part2/phonebook/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Ibrahim Jahanzaib/OneDrive/Desktop/fullstackopen/part2/phonebook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import Filter from'./components/Filter';import Add from'./components/Add';import Numbers from'./components/Numbers';import Notification from'./components/Notification';import contact from'./services/contact';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),filter=_useState8[0],setFilter=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),message=_useState10[0],setMessage=_useState10[1];useEffect(function(){contact.getAll().then(function(allContacts){setPersons(allContacts);});},[]);var addNew=function addNew(event){event.preventDefault();var newPerson={name:newName,number:newNumber};var personExists=persons.find(function(person){return person.name===newName;});if(personExists){var confirmUpdate=window.confirm(\"\".concat(newName,\" is already added to the phonebook. Replace the old number with a new one?\"));if(confirmUpdate){var updated=_objectSpread(_objectSpread({},personExists),{},{number:newNumber});contact.update(personExists.id,updated).then(function(updated){setPersons(persons.map(function(person){return person.id===updated.id?updated:person;}));});setMessage(\"Updated \".concat(newName));setTimeout(function(){setMessage(null);},5000);}}else{contact.create(newPerson).then(function(created){setPersons(persons.concat(created));});setMessage(\"Added \".concat(newName));setTimeout(function(){setMessage(null);},5000);}setNewName('');setNewNumber('');};var filteredPerson=persons.filter(function(person){return person.name&&person.name.toLowerCase().includes(filter.toLowerCase());});var _toggleDelete=function toggleDelete(id){var contactToDelete=persons.find(function(person){return person.id===id;});if(window.confirm(\"Delete \".concat(contactToDelete.name))){contact.remove(id).then(function(){setPersons(persons.filter(function(person){return person.id!==id;}));}).catch(function(error){contact.getAll().then(function(allContacts){return setPersons(allContacts);});setMessage(\"Information of \".concat(contactToDelete.name,\" has already been removed from the server.\"));});}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Notification,{message:message}),/*#__PURE__*/_jsx(Filter,{persons:persons,filter:filter,setFilter:setFilter}),/*#__PURE__*/_jsx(Add,{addNew:addNew,newName:newName,newNumber:newNumber,setNewName:setNewName,setNewNumber:setNewNumber}),/*#__PURE__*/_jsx(\"h2\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(\"ul\",{children:filteredPerson.map(function(person){return/*#__PURE__*/_jsx(Numbers,{name:person.name,number:person.number,id:person.id,toggleDelete:function toggleDelete(){return _toggleDelete(person.id);}},person.id);})})]});};export default App;","map":{"version":3,"names":["useState","useEffect","Filter","Add","Numbers","Notification","contact","jsx","_jsx","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","persons","setPersons","_useState3","_useState4","newName","setNewName","_useState5","_useState6","newNumber","setNewNumber","_useState7","_useState8","filter","setFilter","_useState9","_useState10","message","setMessage","getAll","then","allContacts","addNew","event","preventDefault","newPerson","name","number","personExists","find","person","confirmUpdate","window","confirm","concat","updated","_objectSpread","update","id","map","setTimeout","create","created","filteredPerson","toLowerCase","includes","toggleDelete","contactToDelete","remove","catch","error","children"],"sources":["C:/Users/Ibrahim Jahanzaib/OneDrive/Desktop/fullstackopen/part2/phonebook/src/App.js"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport Filter from './components/Filter'\nimport Add from './components/Add'\nimport Numbers from './components/Numbers'\nimport Notification from './components/Notification'\nimport contact from './services/contact'\n\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [filter, setFilter] = useState('')\n  const [message, setMessage] = useState(null)\n\n  useEffect(() => {\n    contact\n      .getAll()\n      .then(allContacts => {\n        setPersons(allContacts)\n      })\n  }, [])\n\n  const addNew = (event) => {\n    event.preventDefault()\n    const newPerson = {\n      name: newName,\n      number: newNumber\n    }\n  \n    const personExists = persons.find(person => person.name === newName)\n\n    if(personExists) {\n      const confirmUpdate = window.confirm(`${newName} is already added to the phonebook. Replace the old number with a new one?`);\n      if(confirmUpdate){\n        const updated = {...personExists, number:newNumber}\n        contact\n          .update(personExists.id, updated)\n          .then(updated => {\n            setPersons(persons.map(person => person.id === updated.id ? updated : person))\n          })\n        setMessage(`Updated ${newName}`)\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n      }\n    } else {\n      contact\n        .create(newPerson)\n        .then(created => {\n          setPersons(persons.concat(created))\n        })\n      setMessage(`Added ${newName}`)\n      setTimeout(() => {\n        setMessage(null)\n      }, 5000)\n    }  \n    setNewName('')\n    setNewNumber('')\n      \n  }\n\n  const filteredPerson = persons.filter(person => \n    person.name && person.name.toLowerCase().includes(filter.toLowerCase())\n  )\n\n  const toggleDelete = (id) => {\n    const contactToDelete = persons.find(person => person.id === id )\n\n    if(window.confirm(`Delete ${contactToDelete.name}`)) {\n      contact\n      .remove(id)\n      .then(() => {\n        setPersons(persons.filter(person => person.id !== id))\n      })\n      .catch(error => {\n        contact\n          .getAll()\n          .then(allContacts => setPersons(allContacts))\n        setMessage(`Information of ${contactToDelete.name} has already been removed from the server.`)\n        \n      })\n    }\n    \n  }\n    \n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Notification message={message}/>\n      <Filter persons={persons} filter={filter} setFilter={setFilter}/>\n      <Add addNew={addNew} newName={newName} newNumber={newNumber} setNewName={setNewName} setNewNumber={setNewNumber}/>\n      <h2>Numbers</h2>\n      <ul>\n          {filteredPerson.map(person => \n          <Numbers \n            key={person.id}\n            name={person.name} \n            number={person.number} \n            id={person.id}\n            toggleDelete={() => toggleDelete(person.id)}\n            />)}\n      </ul>\n      \n    </div>\n  )\n}\n\nexport default App"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}